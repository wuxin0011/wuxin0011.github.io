(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{403:function(a,s,t){"use strict";t.r(s);var n=t(4),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),s("p",[a._v("放本地文件夹都快吃土了，准备清理文件夹，关于Zookeeper的！")])]),a._v(" "),s("h3",{attrs:{id:"介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[a._v("#")]),a._v(" 介绍")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("官网地址:"),s("a",{attrs:{href:"https://zookeeper.apache.org/doc/r3.8.0/zookeeperStarted.html",target:"_blank",rel:"noopener noreferrer"}},[a._v(" https://zookeeper.apache.org/doc/r3.8.0/zookeeperStarted.html"),s("OutboundLink")],1)])]),a._v(" "),s("li",[s("p",[a._v("中文地址: "),s("a",{attrs:{href:"https://zookeeper.net.cn/index.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://zookeeper.net.cn/index.html"),s("OutboundLink")],1)])])]),a._v(" "),s("h4",{attrs:{id:"核心概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心概念"}},[a._v("#")]),a._v(" 核心概念")]),a._v(" "),s("p",[a._v("zookeeper是一个分布式的开源框架，它能很好的管理集群，而且提供协调分布式应用的基本服务。")]),a._v(" "),s("p",[a._v("它向外部应用暴露一组通用服务——分布式同步（Distributed Synchronization）、命名服务（Naming Service）、集群维护（Group Maintenance）等，简化分布式应用协调及其管理的难度，提供高性能的分布式服务。")]),a._v(" "),s("p",[a._v("zookeeper本身可以以standalone模式（单节点状态）安装运行，不过它的长处在于通过分布式zookeeper集群（一个leader，多个follower），基于一定的策略来保证zookeeper集群的稳定性和可用性，从而实现分布式应用的可靠性。")]),a._v(" "),s("h4",{attrs:{id:"集群角色介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#集群角色介绍"}},[a._v("#")]),a._v(" 集群角色介绍")]),a._v(" "),s("p",[a._v("zookeeper集群中主要有两个角色：leader和follower。")]),a._v(" "),s("p",[a._v("领导者（leader）,用于负责进行投票的发起和决议,更新系统状态。")]),a._v(" "),s("p",[a._v("学习者（learner）,包括跟随者（follower）和观察者（observer）。")]),a._v(" "),s("p",[a._v("其中follower用于接受客户端请求并想客户端返回结果,在选主过程中参与投票。")]),a._v(" "),s("p",[a._v("而observer可以接受客户端连接,将写请求转发给leader,但observer不参加投票过程,只同步leader的状态,observer的目的是为了扩展系统,提高读取速度。")]),a._v(" "),s("p",[a._v("zookeeper节点部署的越多，服务的可靠性也就越高。当然建议最好是部署奇数个，偶数个不是不可以。但是zookeeper集群是以宕机个数过半才会让整个集群宕机的，所以奇数个集群更佳。")]),a._v(" "),s("h3",{attrs:{id:"docker安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[a._v("#")]),a._v(" docker安装")]),a._v(" "),s("h4",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 1、拉取 zookeeper 镜像")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull zookeeper:3.7.1-temurin\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 2、创建 zookeeper 配置文件目录 用于挂载")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /usr/local/zookeeper/conf\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"tickTime=2000\ndataDir=/var/lib/zookeeper \nclientPort=2181"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/usr/local/zookeeper/conf/zoo.cfg\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 3、启动 zookeeper")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" zookeeper01 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2181")]),a._v(":2181 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /usr/local/zookeeper/conf/zoo.cfg:/conf/zoo.cfg zookeeper:3.7.1-temurin\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br")])]),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" zookeeper01 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /usr/local/zookeeper/conf/zoo.cfg:/conf/zoo.cfg zookeeper:3.7.1-temurin\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" zookeeper01 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v("  zookeeper:3.7.1-temurin\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作"}},[a._v("#")]),a._v(" 操作")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入容器")]),a._v("\nroot@8b57a494c9e5:/apache-zookeeper-3.7.1-bin"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ls")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动 zookeeper")]),a._v("\nbin/zkServer.sh start\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入zookeeper")]),a._v("\nbin/zkCli.sh "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1:2181\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[a._v("成功进入后看到如下界面")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("Welcome to ZooKeeper"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("\nJLine support is enabled\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 中间具体内容省略")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h4",{attrs:{id:"命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[a._v("#")]),a._v(" 命令")]),a._v(" "),s("p",[a._v("可以参考 ： "),s("a",{attrs:{href:"https://zookeeper.net.cn/zookeeperCLI.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://zookeeper.net.cn/zookeeperCLI.html"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("成功进入后使用help查勘zookeeper全部命令")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("\n        addauth scheme auth     \t\t\t "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 节点添加权限")]),a._v("\n        close                                            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 节点添加权限")]),a._v("\n        config "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("                            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 配置文件")]),a._v("\n        connect host:port                                "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 连接")]),a._v("\n        create "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-t ttl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" path "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("acl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 添加节点")]),a._v("\n        delete "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-v version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" path \t\t         "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 根据节点版本号删除节点")]),a._v("\n        deleteall path "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-b batch size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 删除该节点以及该节点所有子节点")]),a._v("\n        delquota "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-b"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-N"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-B"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" path\n        get "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" path                               "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 获取节点内容")]),a._v("\n        getAcl "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" path                                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 获取一条路径的ACL权限")]),a._v("\n        getAllChildrenNumber path                        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 获取特定路径下的所有子节点数")]),a._v("\n        getEphemerals path\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("history")]),a._v("                                          "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 查看操作历史")]),a._v("\n        listquota path                                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 列出一个路径的配额")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-R"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" path\n        printwatches on"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("off                              "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 打开/关闭是否打印手表的开关。")]),a._v("\n        quit                                             "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 退出")]),a._v("\n        reconfig "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-v version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-file path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-members "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("serverID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("host:port1:port2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("port3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(","),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("*"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-add "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("serverId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("host:port1:port2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("port3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(","),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("* "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-remove serverId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(","),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("*"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n        redo cmdno\n        removewatches path "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-c"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-d"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-l"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-v version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" path data                  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 设置节点内容 ")]),a._v("\n        setAcl "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-v version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-R"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" path acl\n        setquota -n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-b"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-N"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-B val path\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("stat")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" path\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sync")]),a._v(" path                                        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 异步操作节点")]),a._v("\n        version                                          "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 查看zookeeper版本信息")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("whoami")]),a._v("                                 \t  \t "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 查看用户信息")]),a._v("\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br")])]),s("p",[s("strong",[a._v("基本操作实例")])]),a._v(" "),s("p",[s("strong",[a._v("添加节点")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建节点")]),a._v("\ncreate /zk_test1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置节点内容")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" /zk_test1 zk_test1_content\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 获取节点详细内容")]),a._v("\nget "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /zk_test1\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 测试 添加 给/zk_test1节点添加两个")]),a._v("\nzk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" create /zk_test1/zk_test1_child1\nCreated /zk_test1/zk_test1_child1\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("21")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" create /zk_test1/zk_test1_child2\nCreated /zk_test1/zk_test1_child2\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" /zk_test1/zk_test1_child1 zk_test1_child1_content\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("23")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" /zk_test1/zk_test1_child2 zk_test2_child2_content\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("24")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-R")]),a._v(" /\n/\n/zk_test1\n/zk_test2\n/zookeeper\n/zk_test1/zk_test1_child1\n/zk_test1/zk_test1_child2\n/zookeeper/config\n/zookeeper/quota\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br")])]),s("p",[s("strong",[a._v("删除命令")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" delete /zk_test2\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("26")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" delete /zk_test1\nNode not empty: /zk_test1\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("因为节点 /"),s("strong",[a._v("zk_test1")]),a._v("含有子节点 ，直接是删除不掉的 需要使用 "),s("code",[a._v("deleteall")]),a._v(" 命令,这里就不测试了")]),a._v(" "),s("p",[s("strong",[a._v("版本号测试")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" get "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /zk_test1/zk_test1_child1\nzk_test1_child1_content\ncZxid "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" 0xb\nctime "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" Thu Sep 01 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("19")]),a._v(":38:41 UTC "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2022")]),a._v("\nmZxid "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" 0xd\nmtime "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" Thu Sep 01 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("19")]),a._v(":39:12 UTC "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2022")]),a._v("\npZxid "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" 0xb\ncversion "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\ndataVersion "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 第一次内容版本号")]),a._v("\naclVersion "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\nephemeralOwner "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" 0x0\ndataLength "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("23")]),a._v("\nnumChildren "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" /zk_test1/zk_test1_child1 content_change_child1\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" get "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /zk_test1/zk_test1_child1\ncontent_change_child1\ncZxid "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" 0xb\nctime "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" Thu Sep 01 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("19")]),a._v(":38:41 UTC "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2022")]),a._v("\nmZxid "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" 0x11\nmtime "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" Thu Sep 01 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("19")]),a._v(":47:33 UTC "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2022")]),a._v("\npZxid "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" 0xb\ncversion "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\ndataVersion "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 内容修改之后版本号")]),a._v("\naclVersion "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\nephemeralOwner "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" 0x0\ndataLength "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("21")]),a._v("\nnumChildren "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br")])]),s("p",[a._v("根据版本号删除节点")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("33")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" delete "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("  /zk_test1/zk_test1_child1\nversion No is not valid "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" /zk_test1/zk_test1_child1\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("34")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" delete "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("  /zk_test1/zk_test1_child1\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("35")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" get  /zk_test1/zk_test1_child1\nNode does not exist: /zk_test1/zk_test1_child1 "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 成功删除节点了！")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("设置权限")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("44")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" addauth digest user1:12345\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("46")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" create /acl_auth_test \nCreated /acl_auth_test\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("47")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" setAcl /acl_auth_test auth:user1:12345:crwad\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("48")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" getAcl /acl_auth_test\n"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'digest,'")]),a._v("user1:+owfoSBn/am19roBPzR1/MfCblE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("p",[a._v("重新开个窗口进入容器")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" zookeeper01 /bin/bash\nbin/zkCli.sh "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1:2181\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("WatchedEvent state:SyncConnected type:None path:null\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" getAcl /acl_auth_test\nInsufficient permission "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" /acl_auth_test\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("此时无权限获取节点 "),s("strong",[a._v("/acl_auth_test")]),a._v(" 内容")]),a._v(" "),s("p",[a._v("设置一个节点权限")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("setAcl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-R")]),a._v(" /acl_auth_test auth:user1:12345:crwad\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("其他命令")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("67")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("whoami")]),a._v("\nAuth scheme: User\nip: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1\ndigest: user1\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: localhost:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("68")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" version\nZooKeeper CLI version: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.7")]),a._v(".1-a2fb57c55f8e59cdd76c34b357ad5181df1258d5, built on "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2022")]),a._v("-05-07 06:45 UTC\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("h4",{attrs:{id:"节点属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#节点属性"}},[a._v("#")]),a._v(" 节点属性")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("cZxid")]),a._v(" "),s("th",[a._v("创建节点时的事务ID")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("ctime")]),a._v(" "),s("td",[a._v("创建节点时的时间")])]),a._v(" "),s("tr",[s("td",[a._v("mZxid")]),a._v(" "),s("td",[s("strong",[a._v("最后修改节点时的事务ID")])])]),a._v(" "),s("tr",[s("td",[a._v("mtime")]),a._v(" "),s("td",[a._v("最后修改节点时的时间")])]),a._v(" "),s("tr",[s("td",[a._v("pZxid")]),a._v(" "),s("td",[a._v("表示该节点的子节点列表最后一次修改的事务ID，添加子节点或删除子节点就会影响子节点列表，但是修改子节点的数据内容则不影响该ID**（注意，只有子节点列表变更了才会变更pzxid，子节点内容变更不会影响pzxid）**")])]),a._v(" "),s("tr",[s("td",[a._v("cversion")]),a._v(" "),s("td",[s("strong",[a._v("子节点版本号，子节点每次修改版本号加1")])])]),a._v(" "),s("tr",[s("td",[a._v("dataversion")]),a._v(" "),s("td",[s("strong",[a._v("数据版本号，数据每次修改该版本号加1")])])]),a._v(" "),s("tr",[s("td",[a._v("aclversion")]),a._v(" "),s("td",[a._v("权限版本号，权限每次修改该版本号加1")])]),a._v(" "),s("tr",[s("td",[a._v("ephemeralOwner")]),a._v(" "),s("td",[a._v("创建该临时节点的会话的sessionID。 "),s("strong",[a._v("（")]),a._v("* "),s("em",[a._v("如果该节点是持久节点，那么这个属性值为0）")]),a._v("*")])]),a._v(" "),s("tr",[s("td",[a._v("dataLength")]),a._v(" "),s("td",[a._v("该节点的数据长度")])]),a._v(" "),s("tr",[s("td",[a._v("numChildren")]),a._v(" "),s("td",[a._v("该节点拥有子节点的数量**（只统计直接子节点的数量）**")])])])]),a._v(" "),s("p",[a._v("Zookeeper的应用场景")]),a._v(" "),s("ul",[s("li",[s("ol",[s("li",[a._v("数据发布/订阅")])])]),a._v(" "),s("li",[s("ol",{attrs:{start:"2"}},[s("li",[a._v("负载均衡")])])]),a._v(" "),s("li",[s("ol",{attrs:{start:"3"}},[s("li",[a._v("分布式协调/通知")])])]),a._v(" "),s("li",[s("ol",{attrs:{start:"4"}},[s("li",[a._v("集群管理")])])]),a._v(" "),s("li",[s("ol",{attrs:{start:"5"}},[s("li",[a._v("集群管理")])])]),a._v(" "),s("li",[s("ol",{attrs:{start:"6"}},[s("li",[a._v("master 管理")])])]),a._v(" "),s("li",[s("ol",{attrs:{start:"7"}},[s("li",[a._v("分布式锁")])])]),a._v(" "),s("li",[s("ol",{attrs:{start:"8"}},[s("li",[a._v("分布式队列")])])])]),a._v(" "),s("h3",{attrs:{id:"代码操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码操作"}},[a._v("#")]),a._v(" 代码操作")]),a._v(" "),s("h4",{attrs:{id:"开启服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启服务"}},[a._v("#")]),a._v(" 开启服务")]),a._v(" "),s("p",[a._v("首先开启一个docker容器")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2181")]),a._v(":2181 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("zookeeper02 zookeeper:3.7.1-temurin\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"客户端的zookeeper原生-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#客户端的zookeeper原生-api"}},[a._v("#")]),a._v(" 客户端的zookeeper原生 API")]),a._v(" "),s("p",[a._v("测试连接 这个容器")]),a._v(" "),s("p",[s("strong",[a._v("ConnectionDemo")])]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("throws")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Exception")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("try")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("final")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CountDownLatch")]),a._v(" countDownLatch "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CountDownLatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ZooKeeper")]),a._v(" zooKeeper "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ZooKeeper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"192.168.56.40:2181"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n\n                            "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Watcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Override")]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("process")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("WatchedEvent")]),a._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("KeeperState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("SyncConnected")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                                "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//如果收到了服务端的响应事件，连接成功")]),a._v("\n                                countDownLatch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("countDown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n                            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n            countDownLatch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("await")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//CONNECTED")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("zooKeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 添加一个节点")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("createNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("zooKeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/zk_testNode1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"创建第一个节点"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("catch")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Exception")]),a._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("createNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ZooKeeper")]),a._v(" zooKeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("try")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            zooKeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ZooDefs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("Ids")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("OPEN_ACL_UNSAFE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CreateMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("PERSISTENT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("catch")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("KeeperException")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("InterruptedException")]),a._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br")])]),s("p",[a._v("控制台输出结果，出现  "),s("strong",[a._v("CONNECTED")]),a._v(" 说明连接成功")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("D")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\\environment\\java\\jdk\\bin\\java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("agentlib"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("jdwp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("transport"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("dt_socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("address"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3677")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("suspend"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("server"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("n "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("javaagent"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("C")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Users")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Administrator")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("AppData")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Local")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JetBrains")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("IntelliJIdea2021")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".2")]),a._v("\\captureAgent\\debugger"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("jar "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Dfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("encoding"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("UTF")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("classpath "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"D:\\environment\\java\\jdk\\jre\\lib\\charsets.jar;D:\\environment\\java\\jdk\\jre\\lib\\deploy.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\access-bridge-64.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\cldrdata.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\dnsns.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\jaccess.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\jfxrt.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\localedata.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\nashorn.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\sunec.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\sunjce_provider.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\sunmscapi.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\sunpkcs11.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\zipfs.jar;D:\\environment\\java\\jdk\\jre\\lib\\javaws.jar;D:\\environment\\java\\jdk\\jre\\lib\\jce.jar;D:\\environment\\java\\jdk\\jre\\lib\\jfr.jar;D:\\environment\\java\\jdk\\jre\\lib\\jfxswt.jar;D:\\environment\\java\\jdk\\jre\\lib\\jsse.jar;D:\\environment\\java\\jdk\\jre\\lib\\management-agent.jar;D:\\environment\\java\\jdk\\jre\\lib\\plugin.jar;D:\\environment\\java\\jdk\\jre\\lib\\resources.jar;D:\\environment\\java\\jdk\\jre\\lib\\rt.jar;D:\\desktop\\Learn\\admin\\zookeeper\\target\\classes;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\zookeeper\\zookeeper\\3.7.1\\zookeeper-3.7.1.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\zookeeper\\zookeeper-jute\\3.7.1\\zookeeper-jute-3.7.1.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\yetus\\audience-annotations\\0.12.0\\audience-annotations-0.12.0.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-handler\\4.1.76.Final\\netty-handler-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-common\\4.1.76.Final\\netty-common-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-resolver\\4.1.76.Final\\netty-resolver-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-buffer\\4.1.76.Final\\netty-buffer-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-transport\\4.1.76.Final\\netty-transport-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-codec\\4.1.76.Final\\netty-codec-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-transport-native-epoll\\4.1.76.Final\\netty-transport-native-epoll-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-transport-native-unix-common\\4.1.76.Final\\netty-transport-native-unix-common-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-transport-classes-epoll\\4.1.76.Final\\netty-transport-classes-epoll-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\slf4j\\slf4j-api\\1.7.35\\slf4j-api-1.7.35.jar;D:\\software\\idea\\IntelliJ IDEA 2021.2\\lib\\idea_rt.jar"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("wuxin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("zookeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("ConnectionDemo")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Connected")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("the")]),a._v(" target "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("VM")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" '"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3677")]),a._v("'"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" transport"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token char"}},[a._v("'socket'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Failed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("load")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"org.slf4j.impl.StaticLoggerBinder"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Defaulting")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("no")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("operation "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("NOP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" logger implementation\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("See")]),a._v(" http"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("www"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("slf4j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("codes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("html#"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("StaticLoggerBinder")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" further details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Failed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("load")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"org.slf4j.impl.StaticMDCBinder"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Defaulting")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("no")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("operation "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MDCAdapter")]),a._v(" implementation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("See")]),a._v(" http"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("www"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("slf4j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("codes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("html#no_static_mdc_binder "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" further details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("CONNECTED")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Disconnected")]),a._v(" from the target "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("VM")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" '"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3677")]),a._v("'"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" transport"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token char"}},[a._v("'socket'")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("p",[a._v("进入容器查看添加节点")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" zookeeper02 /bin/bash\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 连接zookeeper服务")]),a._v("\nbin/zkCli.sh "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-server")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1:2181\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看内容")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1:2181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CONNECTED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" /\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("zk_testNode1, zookeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[a._v("节点添加成功！")]),a._v(" "),s("p",[a._v("其他操作类似")]),a._v(" "),s("h4",{attrs:{id:"客户端的curator连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#客户端的curator连接"}},[a._v("#")]),a._v(" 客户端的curator连接")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("curator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("framework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CuratorFramework")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("curator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("framework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CuratorFrameworkFactory")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("curator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("retry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ExponentialBackoffRetry")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("zookeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Stat")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CuratorDemo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("throws")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Exception")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CuratorFramework")]),a._v(" curatorFramework "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CuratorFrameworkFactory")]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("builder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("connectString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"192.168.56.40:2181"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sessionTimeoutMs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("retryPolicy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ExponentialBackoffRetry")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("namespace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        curatorFramework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Stat")]),a._v(" stat "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Stat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//查询节点数据")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("byte")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" bytes "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" curatorFramework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("storingStatIn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("stat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("forPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/zk_testNode1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        curatorFramework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br")])]),s("p",[a._v("输出内容,可以看到输出内容获取到")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("D")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\\environment\\java\\jdk\\bin\\java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("agentlib"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("jdwp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("transport"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("dt_socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("address"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3824")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("suspend"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("server"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("n "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("javaagent"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("C")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Users")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Administrator")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("AppData")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Local")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JetBrains")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("IntelliJIdea2021")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".2")]),a._v("\\captureAgent\\debugger"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("jar "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Dfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("encoding"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("UTF")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("classpath "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"D:\\environment\\java\\jdk\\jre\\lib\\charsets.jar;D:\\environment\\java\\jdk\\jre\\lib\\deploy.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\access-bridge-64.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\cldrdata.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\dnsns.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\jaccess.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\jfxrt.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\localedata.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\nashorn.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\sunec.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\sunjce_provider.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\sunmscapi.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\sunpkcs11.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\zipfs.jar;D:\\environment\\java\\jdk\\jre\\lib\\javaws.jar;D:\\environment\\java\\jdk\\jre\\lib\\jce.jar;D:\\environment\\java\\jdk\\jre\\lib\\jfr.jar;D:\\environment\\java\\jdk\\jre\\lib\\jfxswt.jar;D:\\environment\\java\\jdk\\jre\\lib\\jsse.jar;D:\\environment\\java\\jdk\\jre\\lib\\management-agent.jar;D:\\environment\\java\\jdk\\jre\\lib\\plugin.jar;D:\\environment\\java\\jdk\\jre\\lib\\resources.jar;D:\\environment\\java\\jdk\\jre\\lib\\rt.jar;D:\\desktop\\Learn\\admin\\zookeeper\\target\\classes;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\zookeeper\\zookeeper\\3.7.1\\zookeeper-3.7.1.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\zookeeper\\zookeeper-jute\\3.7.1\\zookeeper-jute-3.7.1.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\yetus\\audience-annotations\\0.12.0\\audience-annotations-0.12.0.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-handler\\4.1.76.Final\\netty-handler-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-common\\4.1.76.Final\\netty-common-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-resolver\\4.1.76.Final\\netty-resolver-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-buffer\\4.1.76.Final\\netty-buffer-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-transport\\4.1.76.Final\\netty-transport-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-codec\\4.1.76.Final\\netty-codec-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-transport-native-epoll\\4.1.76.Final\\netty-transport-native-epoll-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-transport-native-unix-common\\4.1.76.Final\\netty-transport-native-unix-common-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-transport-classes-epoll\\4.1.76.Final\\netty-transport-classes-epoll-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\slf4j\\slf4j-api\\1.7.35\\slf4j-api-1.7.35.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\curator\\curator-framework\\4.0.0\\curator-framework-4.0.0.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\curator\\curator-client\\4.0.0\\curator-client-4.0.0.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\com\\google\\guava\\guava\\20.0\\guava-20.0.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\curator\\curator-recipes\\4.0.0\\curator-recipes-4.0.0.jar;D:\\software\\idea\\IntelliJ IDEA 2021.2\\lib\\idea_rt.jar"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("wuxin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("zookeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("CuratorDemo")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Connected")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("the")]),a._v(" target "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("VM")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" '"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3824")]),a._v("'"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" transport"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token char"}},[a._v("'socket'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Failed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("load")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"org.slf4j.impl.StaticLoggerBinder"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Defaulting")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("no")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("operation "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("NOP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" logger implementation\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("See")]),a._v(" http"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("www"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("slf4j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("codes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("html#"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("StaticLoggerBinder")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" further details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Failed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("load")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"org.slf4j.impl.StaticMDCBinder"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Defaulting")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("no")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("operation "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MDCAdapter")]),a._v(" implementation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("See")]),a._v(" http"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("www"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("slf4j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("codes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("html#no_static_mdc_binder "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" further details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n创建第一个节点\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("h4",{attrs:{id:"监听"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监听"}},[a._v("#")]),a._v(" 监听")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("zookeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("zookeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Stat")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("IOException")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("WatcherDemo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("implements")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Watcher")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ZooKeeper")]),a._v(" zooKeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("try")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 连接客户端")]),a._v("\n            zooKeeper "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ZooKeeper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"192.168.56.40:2181"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("WatcherDemo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("catch")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("IOException")]),a._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Override")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("process")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("WatchedEvent")]),a._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"eventType:"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),a._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("EventType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("NodeDataChanged")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("try")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                zooKeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("exists")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("catch")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("KeeperException")]),a._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("catch")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("InterruptedException")]),a._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("throws")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("IOException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("KeeperException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("InterruptedException")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" path "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/watcher"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("zooKeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("exists")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            zooKeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/watcher"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ZooDefs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("Ids")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("OPEN_ACL_UNSAFE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CreateMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("PERSISTENT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-----------"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//true表示使用zookeeper实例中配置的watcher")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Stat")]),a._v(" stat "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" zooKeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("exists")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("read")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br"),s("span",{staticClass:"line-number"},[a._v("39")]),s("br"),s("span",{staticClass:"line-number"},[a._v("40")]),s("br"),s("span",{staticClass:"line-number"},[a._v("41")]),s("br"),s("span",{staticClass:"line-number"},[a._v("42")]),s("br"),s("span",{staticClass:"line-number"},[a._v("43")]),s("br"),s("span",{staticClass:"line-number"},[a._v("44")]),s("br")])]),s("p",[a._v("控制台内容")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("D")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\\environment\\java\\jdk\\bin\\java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("agentlib"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("jdwp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("transport"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("dt_socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("address"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("14799")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("suspend"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("server"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("n "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("javaagent"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("C")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Users")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Administrator")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("AppData")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Local")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JetBrains")]),a._v("\\"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("IntelliJIdea2021")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".2")]),a._v("\\captureAgent\\debugger"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("jar "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Dfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("encoding"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("UTF")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("classpath "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"D:\\environment\\java\\jdk\\jre\\lib\\charsets.jar;D:\\environment\\java\\jdk\\jre\\lib\\deploy.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\access-bridge-64.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\cldrdata.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\dnsns.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\jaccess.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\jfxrt.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\localedata.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\nashorn.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\sunec.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\sunjce_provider.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\sunmscapi.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\sunpkcs11.jar;D:\\environment\\java\\jdk\\jre\\lib\\ext\\zipfs.jar;D:\\environment\\java\\jdk\\jre\\lib\\javaws.jar;D:\\environment\\java\\jdk\\jre\\lib\\jce.jar;D:\\environment\\java\\jdk\\jre\\lib\\jfr.jar;D:\\environment\\java\\jdk\\jre\\lib\\jfxswt.jar;D:\\environment\\java\\jdk\\jre\\lib\\jsse.jar;D:\\environment\\java\\jdk\\jre\\lib\\management-agent.jar;D:\\environment\\java\\jdk\\jre\\lib\\plugin.jar;D:\\environment\\java\\jdk\\jre\\lib\\resources.jar;D:\\environment\\java\\jdk\\jre\\lib\\rt.jar;D:\\desktop\\Learn\\admin\\zookeeper\\target\\classes;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\zookeeper\\zookeeper\\3.7.1\\zookeeper-3.7.1.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\zookeeper\\zookeeper-jute\\3.7.1\\zookeeper-jute-3.7.1.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\yetus\\audience-annotations\\0.12.0\\audience-annotations-0.12.0.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-handler\\4.1.76.Final\\netty-handler-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-common\\4.1.76.Final\\netty-common-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-resolver\\4.1.76.Final\\netty-resolver-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-buffer\\4.1.76.Final\\netty-buffer-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-transport\\4.1.76.Final\\netty-transport-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-codec\\4.1.76.Final\\netty-codec-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-transport-native-epoll\\4.1.76.Final\\netty-transport-native-epoll-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-transport-native-unix-common\\4.1.76.Final\\netty-transport-native-unix-common-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\io\\netty\\netty-transport-classes-epoll\\4.1.76.Final\\netty-transport-classes-epoll-4.1.76.Final.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\slf4j\\slf4j-api\\1.7.35\\slf4j-api-1.7.35.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\curator\\curator-framework\\4.0.0\\curator-framework-4.0.0.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\curator\\curator-client\\4.0.0\\curator-client-4.0.0.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\com\\google\\guava\\guava\\20.0\\guava-20.0.jar;D:\\environment\\java\\maven\\apache-maven-3.8.3\\maven-repo\\org\\apache\\curator\\curator-recipes\\4.0.0\\curator-recipes-4.0.0.jar;D:\\software\\idea\\IntelliJ IDEA 2021.2\\lib\\idea_rt.jar"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("wuxin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("zookeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("WatcherDemo")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Connected")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("the")]),a._v(" target "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("VM")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" '"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("14799")]),a._v("'"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" transport"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token char"}},[a._v("'socket'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Failed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("load")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"org.slf4j.impl.StaticLoggerBinder"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Defaulting")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("no")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("operation "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("NOP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" logger implementation\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("See")]),a._v(" http"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("www"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("slf4j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("codes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("html#"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("StaticLoggerBinder")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" further details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Failed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("load")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"org.slf4j.impl.StaticMDCBinder"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Defaulting")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("no")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("operation "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MDCAdapter")]),a._v(" implementation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SLF4J")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("See")]),a._v(" http"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("www"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("slf4j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("codes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("html#no_static_mdc_binder "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" further details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\neventType"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("None")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("p",[a._v("监听之后在 docker 容器中操作节点  "),s("strong",[a._v("/watcher")]),a._v(" 操作，")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" /watcher watcher_content\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("控制台新增内容，监听到了节点发生了变化。")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("\neventType"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("NodeDataChanged")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("部分源代码")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[a._v("# 设置监控 \nrequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("setWatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("watcher "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"zookeeper集群搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper集群搭建"}},[a._v("#")]),a._v(" zookeeper集群搭建")]),a._v(" "),s("p",[a._v("docker 容器下 zookeeper 目录如下")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("root@8b57a494c9e5:/"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ls")]),a._v("\napache-zookeeper-3.7.1-bin  data                  etc    lib64   mnt   run   tmp\nbin                         datalog               home   libx32  opt   sbin  usr\nboot                        dev                   lib    logs    proc  srv   var\nconf                        docker-entrypoint.sh  lib32  media   root  sys\nroot@8b57a494c9e5:/"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("p",[a._v("配置文件和 id文件分别在 "),s("strong",[a._v("conf")]),a._v(" 和 "),s("strong",[a._v("data")]),a._v(" 配置文件中")]),a._v(" "),s("p",[a._v("修改配置文件 "),s("strong",[a._v("/conf/zoo.cfg")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dataDir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/data\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dataLogDir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/datalog\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("tickTime")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2000")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("initLimit")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("syncLimit")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("autopurge.snapRetainCount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("autopurge.purgeInterval")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("maxClientCnxns")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("60")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("standaloneEnabled")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("admin.enableServer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("server.1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("localhost:2888:3888"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2181")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br")])]),s("p",[a._v("主要添加以下内容")]),a._v(" "),s("p",[s("strong",[a._v("server.1=192.168.56.10:2888:3888;2181"),s("br"),a._v("\nserver.2=192.168.56.20:2888:3888;2181"),s("br"),a._v("\nserver.3=192.168.56.30:2888:3888;2181")])]),a._v(" "),s("p",[a._v("其他三个类似，然后就是修改 "),s("strong",[a._v("/data/myid")]),a._v(" 内容依次为 1 、2 、3")]),a._v(" "),s("p",[a._v("修改完毕之后需要重新启，这三台就可以默认为是一个zookeeper小集群了")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.runoob.com/w3cnote/zookeeper-linux-cluster.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("详细内容可以参考"),s("OutboundLink")],1)]),a._v(" "),s("h3",{attrs:{id:"zab协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zab协议"}},[a._v("#")]),a._v(" ZAB协议")]),a._v(" "),s("p",[a._v("zookeeper 原子广播协议"),s("a",{attrs:{href:"https://zookeeper.net.cn/zookeeperInternals.html#sc_consistency",target:"_blank",rel:"noopener noreferrer"}},[a._v(" https://zookeeper.net.cn/zookeeperInternals.html#sc_consistency"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("strong",[a._v("ZooKeeper 的核心是一个原子消息系统，它使所有服务器保持同步。")])]),a._v(" "),s("h3",{attrs:{id:"zookeeper原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper原理"}},[a._v("#")]),a._v(" Zookeeper原理")]),a._v(" "),s("h4",{attrs:{id:"监听机制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监听机制"}},[a._v("#")]),a._v(" "),s("a",{attrs:{href:"https://www.runoob.com/w3cnote/zookeeper-watcher.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("监听机制"),s("OutboundLink")],1)]),a._v(" "),s("h4",{attrs:{id:"选举算法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选举算法"}},[a._v("#")]),a._v(" "),s("a",{attrs:{href:"https://www.runoob.com/w3cnote/zookeeper-leader.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("选举算法"),s("OutboundLink")],1)]),a._v(" "),s("h4",{attrs:{id:"分布式锁"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分布式锁"}},[a._v("#")]),a._v(" "),s("a",{attrs:{href:"https://www.runoob.com/w3cnote/zookeeper-locks.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("分布式锁"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);